<!DOCTYPE html>
<!--
Copyright (c) 2017 IBM Corp. and others

This program and the accompanying materials are made available under the terms of the Eclipse Public License 2.0 which accompanies this distribution and is available at http://eclipse.org/legal/epl-2.0 or the Apache License, Version 2.0 which accompanies this distribution and is available at https://www.apache.org/licenses/LICENSE-2.0. 

This Source Code may also be made available under the following Secondary Licenses when the conditions for such availability set forth in the Eclipse Public License, v. 2.0 are satisfied: GNU General Public License, version 2 with the GNU Classpath Exception [1] and GNU General Public License, version 2 with the OpenJDK Assembly Exception [2]. 

[1] https://www.gnu.org/software/classpath/license.html  
[2] http://openjdk.java.net/legal/assembly-exception.html 

SPDX-License-Identifier: EPL-2.0 OR Apache-2.0
-->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>OpenJ9 - Performance</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.css">
  <link rel="stylesheet" href="./css/oj9_media.css">
  <link rel="stylesheet" href="./css/oj9_common.css">  
  <script type="text/javascript" src="./js/oj9_common.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-105616558-1', 'auto');
    ga('send', 'pageview');
  </script>
</head>
<body>
  <div id="main-title">
    <script type="text/javascript">navigation(document.location.href);</script>	
    <div class="title">
      <a href="index.html">
        <!--<img class="title_icon" src="./assets/openj9_6a.png" alt="Eclipse OpenJ9">-->
    	  <img class="title_icon" src="./assets/openj9_6b.png" alt="Eclipse OpenJ9">
      </a>
    </div>  
    <div class="egg">
      <a href="http://wiki.eclipse.org/Development_Resources/Process_Guidelines/What_is_Incubation" target="_blank"><img src="./assets/egg-incubation.png" alt="Eclipse Incubation"></a>
    </div>  
  </div>

  <main>

    <div id="performance" class="section-content">
      <h1>Performance</h1>

      <div class="f-section-item">
        <div class="f-content-container">
          <p class="intro-text" style="padding:2rem 0 2rem 0;">Benchmark testing with the DayTrader 3 application demonstrates significantly better performance for OpenJDK v9 with OpenJ9 than OpenJDK v9 with Hotspot.
          </p>
<!--
          <p class="intro-text" style="padding:2rem 0 0 0;">Around 50% smaller memory footprint</p>
          <p class="intro-text" style="padding:0 0 1rem 0;">Over 40% faster startup time</p>
-->
<!--
          <p class="intro-text" style="padding:0 0 0 0;">Over 40% faster startup time</p>
          <p class="intro-text" style="padding:0 0 1rem 0;">5&times; faster to full throughput</p>
-->
        </div>
      </div>

      <div class="f-section-item">
        <div class="f-content-container">
<!--
          <p class="intro-text1">Benchmark testing with the DayTrader 3 application demonstrates significantly better performance for OpenJDK v9 with OpenJ9 than OpenJDK v9 with Hotspot.
          </p>
          <p class="intro-text" style="padding:2rem 0 0 0;">Around 50% smaller memory footprint</p>
          <p class="intro-text" style="padding:0 0 2rem 0;">Almost 40% faster startup time</p>          
-->
          <p>Many different metrics exist to measure the performance of an application including startup time, ramp up time, footprint, response time, as well as throughput. At Eclipse OpenJ9, we keep a watchful eye on all of these metrics, making sensible tradeoffs and providing tuning options that allow the JVM to be optimized for different workloads.
          </p>
        	<p>To showcase our performance pedigree we set about measuring the strengths of OpenJDK with Eclipse OpenJ9 compared to an OpenJDK with Hotspot. We chose the Daytrader3 application because it is meaningful to measure different performance metrics, unlike many microbenchmarks that focus almost exclusively on throughput. The metrics we focused on include startup time, the JVM footprint size during the experiment, and of course, throughput.
        	</p>
          <p>Take a look at these charts:
          </p>
          <ul>
            <li><a href="#f1">60% less footprint after startup</a></li>
            <li><a href="#f2">40% less footprint during ramp up</a></li>
            <li><a href="#f3">2× faster startup time</a></li>
            <li><a href="#f4">Comparable throughput</a></li>
          </ul>
          <p>While the specific levels of performance shown in these tests might change from benchmark to benchmark or even from machine to machine, the same trends are expected to hold for a large class of server type applications.
        	</p>

          <p class="intro-text" style="padding:2rem 0 2rem 0;">CPU-constrained environments
          </p>
          <p>In a further experiment we tuned Eclipse OpenJ9 for an environment with constrained resources, much like you'd find in a standard cloud deployment.
          </p>
          <ul>
            <li><a href="#f5">4× faster ramp up time</a></li>
          </ul>
          <p> In this scenario, OpenJ9 ramped up 4× faster than Hotspot, performing far more work during the first 8 minutes. An excellent option for short-lived applications in the cloud that are sensitive to response times!
          </p>
<!--
          <p>OpenJ9 achieves a good balance between (often conflicting) performance metrics. Tests show that it offers excellent footprint savings and faster start-up time with the help of AOT technology while also delivering throughput performance that is competitive with Hotspot.
        	</p>
          <p>Due to its low memory footprint, OpenJ9 is particularly well suited for cloud computing environments where memory savings translate into cost savings for cloud users and providers alike.
        	</p>
          <p>While the specific levels of performance shown in these tests might change from benchmark to benchmark or even from machine to machine, the same trends are expected to hold for a large class of server type applications.
        	</p>
-->
          <p style="padding:1rem 0 0rem 0;"><i><b>You can read the full details about how the data was generated at <a href="https://github.com/eclipse/openj9-website/blob/master/benchmark/daytrader3.md">DayTrader 3 benchmark testing</a>.</b></i>
          </p>
      	</div>
      </div>

      <div class="f-section-item" id="f1">
        <div class="f-content-container">
          <h3>Memory footprint after startup</h3>
          <p>OpenJ9 is highly optimized for cloud workloads. The memory footprint (Resident Set Size) is around half the size of other JVM implementations.
          </p>
          <div class="figures">
            <div class="figure">
              <div class="box">
                <a class="pop" href="#fig1">
                  <img src="assets/perf_startup_footprint_xmx1g_2.png" alt="Footprint size after start up (see link below)."/>
                  <span>Click to enlarge</span>
                </a>
              </div>
              <p class="caption1">Fig 1. DayTrader 3 footprint size after start up with a maximum Java heap size set to 1 GB.
              </p>
              <div id="fig1" class="pop-box">
                <a class="close" href="#">&times;</a>
                <div class="content">
                  <img src="assets/perf_startup_footprint_xmx1g_2.png" alt=""/>
                  <p class="caption2">Fig 1. DayTrader 3 footprint size after start up with a maximum Java heap size set to 1 GB.
                  </p>
                </div>
              </div>
            </div>  <!-- end: figure -->
          </div>  <!-- end: figures -->
          <p>Immediately after startup OpenJDK 9 with OpenJ9 showed a footprint size about 60% less than OpenJDK 9 with Hotspot.
          </p>
      	</div>
      </div>


      <div class="f-section-item" id="f2">
        <div class="f-content-container">
          <h3>Memory footprint during ramp up</h3>
          <p>
          </p>
          <div class="figures">
            <div class="figure">
              <div class="box">
                <a class="pop" href="#fig2">
                  <img src="assets/perf_rss_ramp_xmx1g_2.png" alt="Footprint size during ramp up (see link below)."/>
                  <span>Click to enlarge</span>
                </a>
              </div>
              <p class="caption1">Fig 2. DayTrader 3 footprint size during ramp up with a maximum Java heap size set to 1 GB.
              </p>
              <div id="fig2" class="pop-box">
                <a class="close" href="#">&times;</a>
                <div class="content">
                  <img src="assets/perf_rss_ramp_xmx1g_2.png" alt=""/>
                  <p class="caption2">Fig 2. DayTrader 3 footprint size during ramp up with a maximum Java heap size set to 1 GB.
                  </p>
                </div>
              </div>
            </div>  <!-- end: figure -->
          </div>  <!-- end: figures -->
          <p>Memory footprint settled after about 3 minutes from when load was applied to the system. OpenJDK with OpenJ9 was found to use approximately 45% less physical memory than OpenJDK with HotSpot.
          </p>
      	</div>
      </div>

      <div class="f-section-item" id="f3">
        <div class="f-content-container">
          <h3>Startup time</h3>
          <p>Shared classes and Ahead-of-Time (AOT) technologies typically reduce startup time while improving the overall ramp-up time of applications. As a developer you can achieve even faster startup times by using <code>-Xquickstart</code> mode as well.
          </p>
          <div class="figures">
          
            <div class="figure">
              <div class="box">
                <a class="pop" href="#fig3">
                  <img src="assets/perf_startup_xmx1g_2.png" alt="Startup time (see link below)."/>
                  <span>Click to enlarge</span>
                </a>
              </div>
              <p class="caption1">Fig 3. DayTrader 3 startup time with a maximum Java heap size set to 1 GB.
              </p>
              <div id="fig3" class="pop-box">
                <a class="close" href="#">&times;</a>
                <div class="content">
                  <img src="assets/perf_startup_xmx1g_2.png" alt=""/>
                  <p class="caption2">Fig 3. DayTrader 3 startup time with a maximum Java heap size set to 1 GB.
                  </p>
                </div>
              </div>
            </div>  <!-- end: figure -->
          </div>  <!-- end: figures -->
          <p>
          	With AOT enabled, startup time for OpenJDK 9 with OpenJ9 is almost 40% lower than OpenJDK 9 with Hotspot. Moreover, with AOT enabled and <code>-Xquickstart</code>, startup time for OpenJ9 is almost 50% lower.
          </p>
      	</div>
      </div>


      <div class="f-section-item" id="f4">
        <div class="f-content-container">
          <h3>Throughput</h3>
          <div class="figures" style="clear: both;">
            <div class="figure">
              <div class="box">
                <a class="pop" href="#fig4">
                  <img src="assets/perf_thr_ramp_xmx1g_2.png" alt="Throughput during ramp (see link below)."/>
                  <span>Click to enlarge</span>
                </a>
              </div>
              <p class="caption1">Fig 4. DayTrader 3 throughput during ramp up with a maximum Java heap size set to 1 GB.
              </p>
              <div id="fig4" class="pop-box">
                <a class="close" href="#">&times;</a>
                <div class="content">
                  <img src="assets/perf_thr_ramp_xmx1g_2.png" alt=""/>
                  <p class="caption2">Fig 4. DayTrader 3 throughput during ramp up with a maximum Java heap size set to 1 GB.
                  </p>
                </div>
              </div>
            </div>  <!-- end: figure -->
    
          </div>  <!-- end: figures -->
          <p>
          	Eventually, both OpenJDK 9 with OpenJ9 and OpenJDK 9 with Hotspot reach a similar peak throughput. But OpenJDK 9 with OpenJ9 reaches that peak 5&times; faster for this particular benchmark - in under 2 minutes, compared with 9 minutes for OpenJDK 9 with Hotspot.
          </p>
      	</div>
      </div>

      <div class="f-section-item" id="f5">
        <div class="f-content-container">
          <h3>Ramp up time in CPU-constrained environments</h3>
          <p>Virtualization is heavily used in the cloud to split big computing machines into many smaller VM guests. These guests are typically provisioned with a small number of virtual CPUs in order to achieve a high application density and to control the resources dedicated to applications. One side-effect is that Java applications can take longer to ramp-up because JIT compilation threads compete with application threads over the more limited computing resources.
          </p>
          <div class="figures" style="clear: both;">
            <div class="figure">
              <div class="box">
                <a class="pop" href="#fig5">
                  <img src="assets/perf_thr_ramp_xmx1g_1core.png" alt="Throughput during ramp (see link below)."/>
                  <span>Click to enlarge</span>
                </a>
              </div>
              <p class="caption1">Fig 5. DayTrader 3 throughput during ramp up with a maximum Java heap size set to 1 GB and the JVM pinned to 1 core.
              </p>
              <div id="fig5" class="pop-box">
                <a class="close" href="#">&times;</a>
                <div class="content">
                  <img src="assets/perf_thr_ramp_xmx1g_1core.png" alt=""/>
                  <p class="caption2">Fig 5. DayTrader 3 throughput during ramp up with a maximum Java heap size set to 1 GB and the JVM pinned to 1 core.
                  </p>
                </div>
              </div>
            </div>  <!-- end: figure -->
          </div>  <!-- end: figures -->
          <p>Without any additional configuration set, OpenJ9 already ramps up much better than HotSpot. Although we haven't shown it on the graph, HotSpot needs about 30 minutes to reach its peak throughput; in contrast, OpenJ9 needs only 7.5 minutes.
          </p>
          <p>However, ramp-up throughput is improved even more by using a large shared class cache and dynamic Ahead-of-Time (AOT) compilation and also by using <code>-Xtune:virtualized</code> on the command line.
          </p>
          <p>With our recommended configuration for the cloud, the ramp-up curve for OpenJ9 improves substantially compared to its default settings. Whilst OpenJ9 with default settings obtains a higher throughput in the end, it takes a full 3 minutes to equal the peak throughput of our configured OpenJ9. The lower peak throughput seen in the chart results from the use of a lot of AOT-compiled code, which is less optimized, and the presence of <code>-Xtune:virtualized</code> prevents most recompilations.
          </p>
          <p>The total work done by the JVM since load was applied is represented by the area under the curve. The results show that our cloud configuration performs more work than the default OpenJ9 configuration and much more work than Hotspot in the first 8 minutes of the run. Therefore, configuring OpenJ9 to use AOT and <code>-Xtune:virtualized</code> is an excellent solution for short lived JVMs running in a CPU-constrained environment.
          </p>

          <p style="padding:1rem 0 0rem 0;"><i><b>You can read the full details about how the data was generated at <a href="https://github.com/eclipse/openj9-website/blob/master/benchmark/daytrader3.md">DayTrader 3 benchmark testing</a>.</b></i>
          </p>
      	</div>
      </div>

    </div> <!-- end: performance -->

  </main>

  <footer>
    <div class="social-icon">
      <a href="https://github.com/eclipse/openj9" target="_blank" title="Github">
        <i class="fa fa-github" aria-hidden="true" style="font-size: 2.3rem;"></i>
      </a>
    </div>
    <div class="social-icon">
      <a href="https://stackoverflow.com/search?q=%23OpenJ9" target="_blank" title="Stack Overflow">
        <i class="fa fa-stack-overflow" aria-hidden="true" style="font-size: 2rem;"></i>
      </a>
    </div>

    <p>OpenJ9 is an Eclipse Incubator project.</p>
    
    <span class="no-wrap"><i class="fa fa-chevron-circle-right f_mini" aria-hidden="true"></i><a class="dark-link" href="http://www.eclipse.org">Eclipse Foundation website</a></span>
    <span class="no-wrap"><i class="fa fa-chevron-circle-right f_mini" aria-hidden="true"></i><a class="dark-link" href="http://www.eclipse.org/legal/privacy.php">Privacy policy</a></span>
    <span class="no-wrap"><i class="fa fa-chevron-circle-right f_mini" aria-hidden="true"></i><a class="dark-link" href="http://www.eclipse.org/legal/termsofuse.php">Website terms&nbsp;of use</a></span>
    <span class="no-wrap"><i class="fa fa-chevron-circle-right f_mini" aria-hidden="true"></i><a class="dark-link" href="http://www.eclipse.org/legal/copyright.php">Copyright agent</a></span>
    <span class="no-wrap"><i class="fa fa-chevron-circle-right f_mini" aria-hidden="true"></i><a class="dark-link" href="http://www.eclipse.org/legal">Legal</a></span>

  </footer>

  <script src="./js/app.js"></script>
</body>
</html>
